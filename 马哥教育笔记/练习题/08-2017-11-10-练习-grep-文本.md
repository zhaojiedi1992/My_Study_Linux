## 练习1
*我习惯使用egrep，不习惯使用grep,所以使用grep="egrep"这个别名了。*
1) 显示/proc/meminfo文件中以大写或者小写S开头的行
```bash
[root@centos7 sh]# grep "^[s|S]" /proc/meminfo 
SwapCached:            0 kB
SwapTotal:      134217724 kB
SwapFree:       134217724 kB
Shmem:              9468 kB
Slab:              95508 kB
SReclaimable:      42972 kB
SUnreclaim:        52536 kB
```
2）显示/etc/passwd文件中默认shell为非/sbin/nologin的用户。
```bash
[root@centos7 sh]# grep  -v "/sbin/nologin" /etc/passwd | cut -d ":" -f1
root
sync
shutdown
halt
zhaojiedi
u2
u3
u1
```
3）显示/etc/passwd文件中器默认shell为/bin/bash的用户，进一步进现实上述结果中id最大的用户
```bash
[root@centos7 sh]# cat /etc/passwd | grep "/bin/bash" | sort -t ":" -k 3 -n |tail -n 1 | cut -d ":" -f1
u1
```
4）找出/etc/passwd文件中的一位数或者2位数。
```bash
[root@centos7 sh]# cat /etc/passwd | grep "\b[0-9]{1,2}\b" 
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
games:x:12:100:games:/usr/games:/sbin/nologin
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
nobody:x:99:99:Nobody:/:/sbin/nologin
dbus:x:81:81:System message bus:/:/sbin/nologin
rpc:x:32:32:Rpcbind Daemon:/var/lib/rpcbind:/sbin/nologin
saslauth:x:996:76:Saslauthd user:/run/saslauthd:/sbin/nologin
rpcuser:x:29:29:RPC Service User:/var/lib/nfs:/sbin/nologin
ntp:x:38:38::/etc/ntp:/sbin/nologin
tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin
radvd:x:75:75:radvd user:/:/sbin/nologin
gdm:x:42:42::/var/lib/gdm:/sbin/nologin
sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
avahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin
postfix:x:89:89::/var/spool/postfix:/sbin/nologin
tcpdump:x:72:72::/:/sbin/nologin
```
5）显示/boot/grub/grub.conf中以至少一个空白字符开头的行
```bash
[root@centos7 grub2]# cat /boot/grub2/grub.cfg | grep "^[[:space:]]+"
```
6）显示etc/rc.d/init.d/functions文件中，以#开头，后面跟至少一个空白字符，而后有至少一个非空白字符行
```bash
[root@centos7 grub2]# cat /etc/rc.d/init.d/functions | grep "^#[[:space:]]+[^[:space:]]+"
```
7）找出netstat -tan命令执行结果中以LISTEN结尾的行。
```bash
[root@centos7 grub2]# netstat -tan |grep "LISTEN"
tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN     
tcp        0      0 192.168.122.1:53        0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN     
tcp6       0      0 :::111                  :::*                    LISTEN     
tcp6       0      0 :::22                   :::*                    LISTEN     
tcp6       0      0 ::1:631                 :::*                    LISTEN     
tcp6       0      0 ::1:25                  :::*                    LISTEN
```
8)添加用户bash,testbash,basher,nologin,(shell为/sbin/nologin),而找出当前系统上用户名和默认shell相同的用户。
```bash
[root@centos7 grub2]# cat /etc/passwd |grep "([[:alpha:]]+):.*/\1$"
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
nologin:x:1008:1008::/home/nologin:/sbin/nologin
```

## 练习2
1）显示当前系统上root,fedora，或者user1的默认shell.
```bash
[root@centos7 grub2]# cat /etc/passwd |grep "^(root|fedora|user1):"
root:x:0:0:root:/root:/bin/bash
```
2)找出/etc/rc.d/init.d/functions文件中，某单词后跟一组小括号（）行。
```bash
[root@centos7 grub2]# cat /etc/rc.d/init.d/functions | grep "\b[[:alpha:]]+\(\)"
checkpid() {
daemon() {
killproc() {
pidfileofproc() {
pidofproc() {
status() {
success() {
failure() {
passed() {
warning() {
action() {
strstr() {
```
3）使用echo命令输出一个路径，而后使用grep取出其基名。
```bash
[root@centos7 grub2]# echo "/etc/sysconfig/network-scripts/ifcfg-eth0" |grep "/[^/]+/?$" -o | cut -d/ -f2
ifcfg-eth0
[root@centos7 grub2]# echo "/etc/sysconfig/network-scripts/" |grep "/[^/]+/?$" -o | cut -d/ -f2
network-scripts
```
4）找出ifconfig命令结果中的1-255中1-255之间的数字
```bash
[root@centos7 grub2]# ifconfig  |grep "\b([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b" 
        inet 192.168.27.130  netmask 255.255.255.0  broadcast 192.168.27.255
        inet6 fe80::c51b:4345:96ed:27b  prefixlen 64  scopeid 0x20<link>
        ether 00:0c:29:ad:b0:f2  txqueuelen 1000  (Ethernet)
        RX packets 11749  bytes 1033632 (1009.4 KiB)
        TX packets 7952  bytes 2222070 (2.1 MiB)
lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1  (Local Loopback)
        RX packets 12  bytes 1404 (1.3 KiB)
        TX packets 12  bytes 1404 (1.3 KiB)
        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255
        ether 52:54:00:3f:39:3a  txqueuelen 1000  (Ethernet)

```

## 练习2 
1 、找出ifconfig ” “网卡名”  命令结果中本机的IPv4 地址
```bash
[root@centos7 app]# ifconfig ens33 |head -n 2 |tail -n 1 | cut -d " " -f10
```
2 、查出分区空间使用率的最大百分比值
```bash
[root@centos7 app]# df |cut -c 44-46 |sort -n  | tail -n 1
100
```
3 、查出用户UID 最大值的用户名、UID 及shell 类型
```bash
[root@centos7 app]# cat /etc/passwd  | sort -t ":" -k 3 -nr |head -n 1 |cut -d ":" -f1,3,7
nfsnobody:65534:/sbin/nologin
```
4 、查出/tmp 的权限，以数字方式显示
```bash
[root@centos7 app]#  stat /tmp | head -n 4 |tail -n 1 | cut -d "/" -f1 |cut -d "(" -f2
1777
```
5 、统计当前连接本机的每个远程主机IP 的连接数，并按从大
到小排序
```bash
[root@centos7 app]# ss -tn | grep "ESTAB"| tr  -s " "|tr  " " ":"  |cut -d ":" -f6 | sort | uniq -c |sort -r
      2 172.18.1.25
```
