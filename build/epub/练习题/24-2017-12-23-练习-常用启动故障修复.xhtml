<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>24-2017-12-23-练习-常用启动故障修复</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> 
  </head>
  <body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>24-2017-12-23-练习-常用启动故障修复</h1>
<div class="section" id="id2">
<h2>练习1</h2>
<p>1、修改root密码</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="m">1</span>.启动grub界面
<span class="m">2</span>.输入a 添加1
<span class="m">3</span>.进入后passwd 修改密码
<span class="m">4</span>.reboot
</pre></div>
</div>
<p>2、grub添加rsa密码， 并使用光盘去破解密码</p>
<p>添加密码</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos66 grub<span class="o">]</span>$ grub-crypt
Password:
Retype password:
<span class="nv">$6$dggD0xTUdKx6G4wt$1</span>aMQ60tcQrllpnpxoTD0nFQjCCTq65PW9ZAxpJuesXM.wMtq599I0m19stqFyKzqhR91oeetycIML/jGOHxfu1
<span class="c1"># vim /boot/grub/grub.conf</span>
password --encrypt  <span class="nv">$6$yQJwlJBSBqy4tUA6$YekOdnfaa7Dfvgso</span>/C9pLXw1m3Oif8SohGK1KT.bZcBBqAiv2zd4.hFnl7HscYKKeccHoG5oIbF4dSuVD22v6.
<span class="o">[</span>root@centos66 grub<span class="o">]</span>$ reboot
</pre></div>
</div>
<p>光盘破解</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># 进入光盘的救援模式</span>
<span class="c1"># chroot /mnt/sysimage</span>
<span class="c1"># vim /boot/grub/grub.conf 注释掉password行即可</span>
<span class="c1"># reboot</span>
</pre></div>
</div>
<p>3、vmlinuz-2.6.32-696.el6.x86_64和initramfs-2.6.32-696.16.1.el6.x86_64.img丢失的修复方法</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>2个都损坏了的方法
<span class="c1"># 进入救援模式</span>
<span class="c1"># chroot /mnt/sysimage</span>
<span class="c1"># 创建目录 /mnt/cdrom</span>
<span class="c1"># 挂载 mount /dev/cdrom /mnt/cdrom</span>
<span class="c1"># rpm安装 rpm -ivh /mnt/cdrom/Packages/kerneal[Tab下] --force</span>
<span class="c1"># reboot</span>

只有initramfs损坏的话

<span class="c1"># 进入救援模式</span>
<span class="c1"># chroot /mnt/sysimage</span>
<span class="c1"># mkinitrd initramfs-`uname-r`.img `uname-r`</span>
<span class="c1"># reboot</span>

只有vmlinuxz损坏的话

<span class="c1"># 进入救援模式</span>
<span class="c1"># copy过来vmlinuxz文件。 并重新命名为vmlinuz-`uname -r`</span>
<span class="c1"># reboot</span>
</pre></div>
</div>
<p>4、bootloader损坏的修复</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># 进入救援模式</span>
<span class="c1"># grub-install --root-directory=/ /dev/sda</span>
<span class="c1"># reboot</span>
</pre></div>
</div>
<p>5、磁盘前27个扇区损坏的修复</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># 进入救援模式</span>
<span class="c1"># grub-install --root-directory=/ /dev/sda</span>
<span class="c1"># reboot</span>
</pre></div>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>