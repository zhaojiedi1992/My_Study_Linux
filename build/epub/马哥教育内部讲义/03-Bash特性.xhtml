<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>03 LINUX上bash的基础特性(一）</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> 
  </head>
  <body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="linuxbash">
<h1>03 LINUX上bash的基础特性(一）</h1>
<div class="section" id="id1">
<h2>3.1 命令历史</h2>
<p>环境变量</p>
<ul class="simple">
<li><p>HISTSIZE:命令历史的条数</p></li>
<li><p>HISTFILE:默认为`~/.bash_history`</p></li>
<li><p>HISTFILESIZE:HISTFILE文件记录历史的条数</p></li>
</ul>
<p>history 常用命令</p>
<dl class="option-list">
<dt><kbd><span class="option">-d</span></kbd></dt>
<dd><p>删除指定的命令</p>
</dd>
<dt><kbd><span class="option">-c</span></kbd></dt>
<dd><p>清空命令</p>
</dd>
<dt><kbd><span class="option">-a</span></kbd></dt>
<dd><p>手工追加当前会话的命令历史到历史文件中去</p>
</dd>
</dl>
<p>调用历史命令</p>
<ul class="simple">
<li><p>!#:重复执行第#条命令</p></li>
<li><p>!!:重复执行上一条命令</p></li>
<li><p>!str:执行指定str开头的命令（最后一个）</p></li>
<li><p>!?:获得最后执行的状态码</p></li>
</ul>
<p>控制命令历史的记录方式</p>
<p>主要和HISTCONTROL这个环境变量有关（&quot;/etc/profile&quot;）</p>
<ul class="simple">
<li><p>ignoredups:忽略重复</p></li>
<li><p>ignorespace:忽略空白开头</p></li>
<li><p>ignoreboth:上面2个都启用</p></li>
</ul>
</div>
<div class="section" id="id2">
<h2>3.2 命令补全</h2>
<p>tab补全</p>
</div>
<div class="section" id="id3">
<h2>3.3 路径补全</h2>
<p>tab补全</p>
</div>
<div class="section" id="id4">
<h2>3.4 目录管理类命令</h2>
<div class="section" id="mkdir">
<h3>3.4.1 mkdir</h3>
<p>用法： mkdir [option] directoy...</p>
<dl class="option-list">
<dt><kbd><span class="option">-p</span></kbd></dt>
<dd><p>没有父目录就一起创建了</p>
</dd>
<dt><kbd><span class="option">-v</span></kbd></dt>
<dd><p>显示创建目录过程</p>
</dd>
<dt><kbd><span class="option">-m</span></kbd></dt>
<dd><p>指定权限</p>
</dd>
</dl>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># mkdir -pv /app/dirtest/a/b/c/d</span>
mkdir: created directory <span class="s1">&#39;/app/dirtest/a&#39;</span>
mkdir: created directory <span class="s1">&#39;/app/dirtest/a/b&#39;</span>
mkdir: created directory <span class="s1">&#39;/app/dirtest/a/b/c&#39;</span>
mkdir: created directory <span class="s1">&#39;/app/dirtest/a/b/c/d&#39;</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># mkdir -m 0744 d</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ls</span>
a  d
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ll</span>
total <span class="m">8</span>
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:47 a
drwxr--r--. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:47 d
</pre></div>
</div>
</div>
<div class="section" id="tree">
<h3>3.4.2 tree</h3>
<p>用法： tree [option] directory</p>
<dl class="option-list">
<dt><kbd><span class="option">-d</span></kbd></dt>
<dd><p>只显示目录</p>
</dd>
<dt><kbd><span class="option">-L</span></kbd></dt>
<dd><p>只显示指定的level级别</p>
</dd>
<dt><kbd><span class="option">-P</span></kbd></dt>
<dd><p>只显示匹配指定的路径</p>
</dd>
</dl>
</div>
<div class="section" id="id5">
<h3>3.4.3 命令行展开</h3>
<p>~，{},~username</p>
</div>
<div class="section" id="id6">
<h3>3.4.4 命令的执行结果状态</h3>
<p>$?：获取上一个命令的执行状态码</p>
</div>
<div class="section" id="id7">
<h3>3.4.5 文件查看命令</h3>
<p>more</p>
<p>less</p>
<p>head</p>
<dl class="option-list">
<dt><kbd><span class="option">-n</span></kbd></dt>
<dd><p>获取前n行</p>
</dd>
<dt><kbd><span class="option">-c</span></kbd></dt>
<dd><p>获取前n个字符</p>
</dd>
</dl>
<p>tail</p>
<dl class="option-list">
<dt><kbd><span class="option">-n</span></kbd></dt>
<dd><p>获取后n行</p>
</dd>
<dt><kbd><span class="option">-c</span></kbd></dt>
<dd><p>获取后n个字符</p>
</dd>
<dt><kbd><span class="option">-f</span></kbd></dt>
<dd><p>动态显示</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="id8">
<h2>3.5 文件管理</h2>
<div class="section" id="cp">
<h3>3.5.1 cp</h3>
<p>用法： cp src dst</p>
<p>情况1：测试src是文件，目标不存在</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># touch a.tx</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ls</span>
a  a.tx  bin  d  sbin  usr  x  x_m  x_n  y_m  y_n
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># cp a.tx p</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ll</span>
total <span class="m">40</span>
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:47 a
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:09 a.tx
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:01 bin
drwxr--r--. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:47 d
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:09 p
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:01 sbin
drwxr-xr-x. <span class="m">4</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:01 usr
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:59 x
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 x_m
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 x_n
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 y_m
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 y_n
</pre></div>
</div>
<p>情况2：测试src是文件，dst存在</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># cp a.tx  p</span>
cp: overwrite <span class="s1">&#39;p&#39;</span>? y
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># cp a.tx  a</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ll a</span>
total <span class="m">4</span>
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:11 a.tx
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:47 b
</pre></div>
</div>
<p>情况3：测试src是目录,dst不存在</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># cp -r a ap</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ll</span>
total <span class="m">44</span>
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:11 a
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:12 ap
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:09 a.tx
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:01 bin
drwxr--r--. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:47 d
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:11 p
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:01 sbin
drwxr-xr-x. <span class="m">4</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:01 usr
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:59 x
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 x_m
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 x_n
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 y_m
drwxr-xr-x. <span class="m">2</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:00 y_n
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ll a ap</span>
a:
total <span class="m">4</span>
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:11 a.tx
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">06</span>:47 b

ap:
total <span class="m">4</span>
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:12 a.tx
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:12 b
</pre></div>
</div>
<p>情况4：测试src是目录，dst存在</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># cp -r a ap</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ll ap</span>
total <span class="m">8</span>
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:14 a
-rw-r--r--. <span class="m">1</span> root root    <span class="m">0</span> Aug  <span class="m">7</span> <span class="m">07</span>:12 a.tx
drwxr-xr-x. <span class="m">3</span> root root <span class="m">4096</span> Aug  <span class="m">7</span> <span class="m">07</span>:12 b
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># cd a</span>
<span class="o">[</span>root@centos6 a<span class="o">]</span><span class="c1"># ls</span>
a.tx  b
<span class="o">[</span>root@centos6 a<span class="o">]</span><span class="c1"># tree ap</span>
ap <span class="o">[</span>error opening dir<span class="o">]</span>

<span class="m">0</span> directories, <span class="m">0</span> files
<span class="o">[</span>root@centos6 a<span class="o">]</span><span class="c1"># ls</span>
a.tx  b
<span class="o">[</span>root@centos6 a<span class="o">]</span><span class="c1"># cd ..</span>
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># ls</span>
a  ap  a.tx  bin  d  p  sbin  usr  x  x_m  x_n  y_m  y_n
<span class="o">[</span>root@centos6 dirtest<span class="o">]</span><span class="c1"># tree ap</span>
ap
├── a
│   ├── a.tx
│   └── b
│       └── c
│           └── d
├── a.tx
└── b
    └── c
        └── d

<span class="m">7</span> directories, <span class="m">2</span> files
</pre></div>
</div>
<p>mv</p>
<p>rm</p>
<dl class="option-list">
<dt><kbd><span class="option">-i</span></kbd></dt>
<dd><p>交互</p>
</dd>
<dt><kbd><span class="option">-f</span></kbd></dt>
<dd><p>强制</p>
</dd>
<dt><kbd><span class="option">-r</span></kbd></dt>
<dd><p>递归</p>
</dd>
</dl>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>